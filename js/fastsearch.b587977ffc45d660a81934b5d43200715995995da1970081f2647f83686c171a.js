var h,c=document.getElementById("searchResults"),r=document.getElementById("searchInput"),O,S,v=null,u=!1;window.onload=function(){let e=new XMLHttpRequest;e.onreadystatechange=function(){var s,t,a,n,o,i,p,y,d,m,g;if(e.readyState===4)if(e.status===200){let L=JSON.parse(e.responseText);if(L){let E={distance:100,threshold:.4,ignoreLocation:!0,keys:["title","permalink","summary","content"]};void 0&&(E={isCaseSensitive:(s=(void 0).iscasesensitive)!=null?s:!1,includeScore:(t=(void 0).includescore)!=null?t:!1,includeMatches:(a=(void 0).includematches)!=null?a:!1,minMatchCharLength:(n=(void 0).minmatchcharlength)!=null?n:1,shouldSort:(o=(void 0).shouldsort)!=null?o:!0,findAllMatches:(i=(void 0).findallmatches)!=null?i:!1,keys:(p=(void 0).keys)!=null?p:["title","permalink","summary","content"],location:(y=(void 0).location)!=null?y:0,threshold:(d=(void 0).threshold)!=null?d:.4,distance:(m=(void 0).distance)!=null?m:100,ignoreLocation:(g=(void 0).ignorelocation)!=null?g:!0}),h=new Fuse(L,E)}}else console.log(e.responseText)},e.open("GET","/index.json"),e.send()};function f(e){document.querySelectorAll(".focus").forEach(function(s){s.classList.remove("focus")}),e?(e.focus(),document.activeElement=v=e,e.parentElement.classList.add("focus")):document.activeElement.parentElement.classList.add("focus")}function k(){u=!1,document.querySelector("#resultsWrapper").style.display="none",c.innerHTML=r.value="",r.focus()}function w(e,s){let a=e.toLowerCase().indexOf(s.toLowerCase());if(a===-1)return e.substring(0,150)+"...";let n=Math.max(0,a-150/2),o=Math.min(e.length,n+150),i=e.substring(n,o);return(n>0?"...":"")+i+(o<e.length?"...":"")}r.onkeyup=function(e){let s=this.value.trim(),t=document.querySelector("#resultsWrapper");if(h&&s){let a;if(void 0?a=h.search(this.value.trim(),{limit:(void 0).limit}):a=h.search(this.value.trim()),a.length!==0){let n=`
                <div id="searchTitle">Search Results</div>
                <div id="listWrapper">
                <ul>
                `;for(let o in a){let i=a[o].item,p=i.date?new Date(i.date).toISOString().split("T")[0]:"",d=w(i.content,s).replace(new RegExp(s,"gi"),m=>`<mark>${m}</mark>`);n+=`
                    <li class="post-entry">
                        <div class="res-header">
                            <span class="res-title">${i.title}</span>
                            <span class="res-date">${p}</span>
                        </div>
                        <div class="res-summary">${d}</div>
                        <a href="${i.permalink}" aria-label="${i.title}">
                        </a>
                    </li>`}n+="</ul></div>",c.innerHTML=n,t.style.display="block",u=!0,O=c.firstChild,S=c.lastChild}else{u=!1;let n=`
                <div id="searchTitle">Search Results</div>
                <div id="noResult">Not Found.</div>`;c.innerHTML=s?n:"",t.style.display="block"}}else c.innerHTML="",t.style.display="none",u=!1};r.addEventListener("search",function(e){this.value||k()});document.onkeydown=function(e){let s=e.key,t=document.activeElement,a=document.getElementById("searchbox").contains(t);if(t===r){let n=document.getElementsByClassName("focus");for(;n.length>0;)n[0].classList.remove("focus")}else v&&(t=v);if(s==="Escape")k();else{if(!u||!a)return;s==="ArrowDown"?(e.preventDefault(),t==r?f(c.firstChild.lastChild):t.parentElement!=S&&f(t.parentElement.nextSibling.lastChild)):s==="ArrowUp"?(e.preventDefault(),t.parentElement==O?f(r):t!=r&&f(t.parentElement.previousSibling.lastChild)):s==="ArrowRight"&&t.click()}};
